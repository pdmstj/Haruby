<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ì˜¤ëŠ˜ì˜ ìš´ì„¸ ì¶”ì²œ</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>âœ¨ ì˜¤ëŠ˜ì˜ ìš´ì„¸ ì¶”ì²œë´‡ âœ¨</h1>
  <button onclick="getFortune()">ì „ì²´ ì¶”ì²œ ë³´ê¸°</button>

  <select id="categorySelect" onchange="getCategory()">
    <option value="">ì¹´í…Œê³ ë¦¬ ì„ íƒ</option>
    <option value="foods">ìŒì‹</option>
    <option value="musics">ìŒì•…</option>
    <option value="games">ê²Œì„</option>
  </select>

  <div id="result" class="card"></div>

  <script>
    function getFortune() {
      document.getElementById('result').innerHTML = "ğŸ”® ìš´ì„¸ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘...";
      fetch('/today-luck')
        .then(res => res.json())
        .then(data => {
          if (data.error) return alert(data.error);
          document.getElementById('result').innerHTML = `
            <h2>ğŸŒŸ ìš´ì„¸</h2><p>${data.ìš´ì„¸}</p>
            <h2>ğŸœ ìŒì‹</h2><p>${data.ìŒì‹}</p>
            <h2>ğŸµ ìŒì•…</h2><p>${data.ìŒì•…}</p>
            <h2>ğŸ® ê²Œì„</h2><p>${data.ê²Œì„}</p>
          `;
        });
    }

    function getCategory() {
      const category = document.getElementById('categorySelect').value;
      if (!category) return;
      fetch(`/today-luck/${category}`)
        .then(res => res.json())
        .then(data => {
          if (data.error) return alert(data.error);
          document.getElementById('result').innerHTML = `
            <h2>ğŸ ì¶”ì²œ ${category}</h2><p>${data[category]}</p>
          `;
        });
    }
  </script>
</body>
</html>
